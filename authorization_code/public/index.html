<!doctype html>
<html>
  <head>
    <title>spotify-this-year</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
    <link type="text/css" rel="stylesheet" href="style.css">
  </head>

  <body>
    <a id="btn_reset" href="/">RESET</a>
    <div class="container">
      <div id="login">
        <h2>Log in to allow spotify-this-year to access your Spotify data</h2>
        <a href="/login" class="btn btn-primary">Log in with Spotify</a>
      </div>

      <div id="loggedin">
        <div class="row">
            <div id="left" class="column">
                <div id="user-profile"></div>
            </div>
            <div id="right" class="column">
                <div id="oauth"></div>
            </div>
        </div>
        <div id="playlist"></div>
      </div>
    </div>
      

    <script id="user-profile-template" type="text/x-handlebars-template">
      <h2>User info</h2>
      <div class="media">
        <div class="pull-left">
          <img class="media-object" width="150" src="{{images.0.url}}" />
        </div>
        <div class="media-body">
          <dl class="dl-horizontal">
            <dt>Display name</dt><dd class="clearfix">{{display_name}}</dd>
            <dt>Id</dt><dd>{{id}}</dd>
            <dt>Email</dt><dd>{{email}}</dd>
            <dt>Spotify URI</dt><dd><a href="{{external_urls.spotify}}">{{external_urls.spotify}}</a></dd>
            <dt>Link</dt><dd><a href="{{href}}">{{href}}</a></dd>
            <dt>Profile Image</dt><dd class="clearfix"><a href="{{images.0.url}}">{{images.0.url}}</a></dd>
            <dt>Country</dt><dd>{{country}}</dd>
          </dl>
        </div>
      </div>
    </script>

    <script id="oauth-template" type="text/x-handlebars-template">
      <h2>oAuth info</h2>
      <dl class="dl-horizontal">
        <button class="btn btn-default" id="obtain-new-token">Obtain new access token</button>
        <br>
        <dt>Access token</dt>
        <dd class="text">{{access_token}}</dd>
        <dt>Refresh token</dt>
        <dd class="text">{{refresh_token}}</dd>
      </dl>
    </script>
    
    <script id="playlist-template" type="text/x-handlebars-template">
      <h2>Playlist info</h2>
        <!-- <button class="btn btn-default" id="btn-test">TEST</button> -->
        {{#if admin}}
        <button class="btn btn-default" id="download-all-stats">Download details on all my playlists</button>
        {{/if}}

        <button class="btn btn-default" id="create-new-this-year-playlist">Create released-this-year playlist</button>
        <input id="year-input" maxlength="4" value="{{thisYear}}">
      <hr>
        <span>User id:</span>
        <!-- <input id="user-input" placeholder="User Id"> -->
        <input id="user-input" class="id-input" placeholder="<User Id>" value="{{id}}">
        <button class="btn btn-default" id="get-playlists">Get playlists</button>
        <button class="btn btn-default" id="dl-playlists">Download playlists</button>
        <div id="playlist-results"></div>
      <!-- <hr>
        <button class="btn btn-default" id="get-liked">Get liked songs</button>
        <button class="btn btn-default" id="dl-liked">Download liked songs</button>
        <div id="liked-results"></div> -->
      <hr>
        <span>Playlist id:</span>
        <input id="playlist-input" class="id-input" placeholder="<Playlist Id> or `liked` (without backticks)">
        <!-- <input id="playlist-input" placeholder="Playlist Id" value=""> -->
        <button class="btn btn-default" id="get-playlist-data">Get playlist data</button>
        <button class="btn btn-default" id="dl-playlist-data">Download playlist data</button>
        {{#if admin}}
        <button class="btn btn-default" id="get-detailed-playlist-info">Get detailed playlist data</button>
        <button class="btn btn-default" id="dl-detailed-playlist-info">Download detailed playlist data</button>
        {{/if}}
        <div id="playlist-response"></div>
      {{#if admin}}
      <hr>
        <input id="track-input" class="id-input" placeholder="<Track Id>" value="">
        <!-- <input id="track-input" placeholder="Track Id" value=""> -->
        <button class="btn btn-default" id="get-track-info">Get song data</button>
        <div id="track-response"></div>
      {{/if}}
    </script>

    <script src="//cdnjs.cloudflare.com/ajax/libs/handlebars.js/2.0.0-alpha.1/handlebars.min.js"></script>
    <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
    <script type="module" src="app.js"></script>
  </body>
</html>

